// 2025 @davex keymap.c for Keychron Q6 Max
// Dave Castaldo
// most of the code for this keybaord comes from userspace

#include QMK_KEYBOARD_H
#include "layers.h"
#include "process_record_userspace.h"

__attribute__ ((weak))
bool process_record_secrets(uint16_t keycode, keyrecord_t *record) {
  return true;
}
__attribute__ ((weak))
bool process_leader_secrets(void) {
  return true;
}

//  these layers are setup up layers.h
/*  ~=~=~=~=~=~=~=~=~=~=~=~=~=~=~
enum layers {
    MAC_BASE,
    WIN_BASE,
    CLCK_LAYR,
    FN_LAYR,
    SFT_LAYR,
    KCTL_LAYR,
    TMUX_LAYR,
    VS_LAYR,
    MSYM_LAYR,
    WSYM_LAYR,
    WIDE_LAYR,
    CIRC_LAYR,
    EMO_LAYR,
    LOCK_LAYR
};
//  ~=~=~=~=~=~=~=~=~=~=~=~=~=~=~ */

enum custom_keycodes {
    CUSTOM_KEYCODE = USERSPACE_END,
};

// clang-format off
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
//  [MAC_BASE]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |Esc | | F1 || F2 || F3 || F4 | | F5 || F6 || F7 || F8 | | F9 || F10|| F11|| F12|  |F14 | |Snap||Siri||Glob| :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: | `  || 1  || 2  || 3  || 4  || 5  || 6  || 7  || 8  || 9  || 0  || -  || =  || Bkspace | |Ins ||Home||PgUp| :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |LT(Tab)|| Q  || W  || E  || R  || T  || Y  || U  || I  || O  || P  || [  || ]  ||LT(\) | |Del ||End ||PgDn| :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |TD(Caps)|| A  || S  || D  || F  || G  || H  || J  || K  || L  || ;  || '  || Enter     |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: | Shift     || Z  || X  || C  || V  || B  || N  || M  || ,  || .  || /  ||TD(SFT_OSL)   |       |Up  |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |Ctrl ||Opt  || Cmd ||                Space                ||TDCmd||TDOpt||TDFn ||Ctrl  | |Left||Down||Rigt| :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [MAC_BASE] = LAYOUT_ansi(
	DUAL_ESC, KC_F1, KC_F2, KC_F3, KC_F4, KC_F5, KC_F6, KC_F7, KC_F8, KC_F9, KC_F10, KC_F11, KC_F12, KC_F14, DUAL_SNAP, US_SIRI, AP_GLOB,
	KC_GRV, KC_1, KC_2, KC_3, KC_4, KC_5, KC_6, KC_7, KC_8, KC_9, KC_0, KC_MINS, KC_EQL, BSPCFAST, KC_INS, KC_HOME, KC_PGUP,
	LT(TMUX_LAYR,KC_TAB), KC_Q, KC_W, KC_E, KC_R, KC_T, KC_Y, KC_U, KC_I, KC_O, KC_P, KC_LBRC, KC_RBRC, LT(EMO_LAYR,KC_BSLS), KC_DEL, KC_END, KC_PGDN,
	TD(CAPS_LAYR), KC_A, KC_S, KC_D, KC_F, KC_G, KC_H, KC_J, KC_K, KC_L, KC_SCLN, KC_QUOT, KC_NO, KC_ENT,
	KC_LSFT, KC_NO, KC_Z, KC_X, KC_C, KC_V, KC_B, KC_N, KC_M, KC_COMM, KC_DOT, KC_SLSH, TD(RSFT_OSL),  KC_UP,
	KC_LCTL, KC_LOPT, KC_LCMD, KC_NO,              KC_SPC,             KC_NO, TD(RCMD_OSL),TD(ROPT_OSL),TD(FN_OSL),KC_RCTL, KC_LEFT, KC_DOWN, KC_RGHT
    ),
//  [WIN_BASE]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |Esc | | F1 || F2 || F3 || F4 | | F5 || F6 || F7 || F8 | | F9 || F10|| F11|| F12|  |Menu| |PScr||Ctan||RTog| :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: | `  || 1  || 2  || 3  || 4  || 5  || 6  || 7  || 8  || 9  || 0  || -  || =  || Bkspace | |Ins ||Home||PgUp| :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: | Tab   || Q  || W  || E  || R  || T  || Y  || U  || I  || O  || P  || [  || ]  || \    | |Del ||End ||PgDn| :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: | Caps   || A  || S  || D  || F  || G  || H  || J  || K  || L  || ;  || '  || Enter     |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: | Shift     || Z  || X  || C  || V  || B  || N  || M  || ,  || .  || /  || TD(RSFT_OSL) |       |Up  |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |LCtrl||TLGUI||LAlt ||                Space                ||TRAlt||RWin ||TDFn ||RCtrl | |Left||Down||Rigt| :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [WIN_BASE] = LAYOUT_ansi(
	DUAL_ESC, KC_F1, KC_F2, KC_F3, KC_F4, KC_F5, KC_F6, KC_F7, KC_F8, KC_F9, KC_F10, KC_F11, KC_F12, KC_APP, KC_PSCR, US_CATANA, CSTMTOG,
	KC_GRV, KC_1, KC_2, KC_3, KC_4, KC_5, KC_6, KC_7, KC_8, KC_9, KC_0, KC_MINS, KC_EQL, BSPCFAST, KC_INS, KC_HOME, KC_PGUP,
	LT(TMUX_LAYR,KC_TAB), KC_Q, KC_W, KC_E, KC_R, KC_T, KC_Y, KC_U, KC_I, KC_O, KC_P, KC_LBRC, KC_RBRC, TD(DYN_LAYR), KC_DEL, KC_END, KC_PGDN,
	TD(CAPS_LAYR), KC_A, KC_S, KC_D, KC_F, KC_G, KC_H, KC_J, KC_K, KC_L, KC_SCLN, KC_QUOT, KC_NO, KC_ENT,
	KC_LSFT, KC_NO, KC_Z, KC_X, KC_C, KC_V, KC_B, KC_N, KC_M, KC_COMM, KC_DOT, KC_SLSH, TD(RSFT_OSL),  KC_UP,
	KC_LCTL, TD(LGUI_OSL), KC_LALT, KC_NO,           KC_SPC,          KC_NO, TD(RALT_OSL),KC_RWIN,TD(FN_OSL),KC_RCTL, KC_LEFT, KC_DOWN, KC_RGHT
    ),
//  [CLCK_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |    ||    ||    ||    | |    ||    ||    ||    | |    ||    ||    ||    |  |    | |    ||    ||    | :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |    ||    ||    ||    ||    ||    ||    ||    ||    ||    ||    ||    ||    ||         | |    ||    ||    | :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |       || Q  || W  || E  || R  || T  || Y  || U  || I  || O  || P  ||    ||    ||      | |    ||    ||    | :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        || A  || S  || D  || F  || G  || H  || J  || K  || L  ||    ||    ||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |           || Z  || X  || C  || V  || B  || N  || M  ||    ||    ||    ||              |       |    |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||     ||     ||                                     ||     ||     ||     ||      | |    ||    ||    | :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [CLCK_LAYR] = LAYOUT_ansi(
	_______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
	_______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
	_______, S(KC_Q), S(KC_W), S(KC_E), S(KC_R), S(KC_T), S(KC_Y), S(KC_U), S(KC_I), S(KC_O), S(KC_P), _______, _______, _______, _______, _______, _______,
	_______, S(KC_A), S(KC_S), S(KC_D), S(KC_F), S(KC_G), S(KC_H), S(KC_J), S(KC_K), S(KC_L), _______, _______, _______, _______,
	_______, _______, S(KC_Z), S(KC_X), S(KC_C), S(KC_V), S(KC_B), S(KC_N), S(KC_M), _______, _______, _______, _______,  _______,
	_______, _______, _______, _______,           _______,          _______, _______, _______, _______, _______, _______, _______, _______
    ),
//  [FN_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |    ||    ||VRep||    | |CkOt||    ||    ||GLog| |Add ||Cmit||    ||Push|  |F13 | |Snap||Siri||News| :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |    ||    ||    ||    ||    ||    ||    ||    ||    ||    ||Time||Arro||Wave||         | |LLck||TPrv||WPrv| :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |M(TMUX)||WMa2||WMa1||Mail||RPho||WPho||    ||Uni ||    ||    ||    ||Rec1||Rec2||VS/EMO| |SLck||TNxt||WNxt| :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||Addr||City||ZIP ||Phon||    ||    ||    ||    ||Lead||    ||    ||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |MO(SFT_L)  ||    ||Rout||Acct||DPW ||SFCU||    ||    ||Ply1||Ply2||    ||MO(SFT_LAYR)  |       |    |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||WMSym||MOCtl||                                     ||MOCtl||WMSym||     ||      | |    ||    ||    | :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [FN_LAYR] = LAYOUT_ansi(
	_______, _______, _______, VI_REPLACE, _______, GIT_CHKOUT, _______, _______, GIT_LOG, GIT_ADD, GIT_COMMIT, _______, GIT_PUSH, KC_F13, SSMENU, MOD_SIRI, GNEWS,
	_______, _______, _______, _______, _______, _______, _______, _______, _______, _______, TIMESTAMP, ARROW, WAVE, _______, LLOCK, V_TAB_PRV, V_WSPC_PRV,
	MO(TMUX_LAYR), SECRET3, SECRET2, SECRET1, SECRET8, SECRET9, _______, UNICODE, _______, _______, _______, DM_REC1, DM_REC2, VSEMOLR, KC_SCRL, V_TAB_NXT, V_WSPC_NXT,
	_______, SECRET4, SECRET5, SECRET6, SECRET7, _______, _______, _______, _______, QK_LEAD, _______, _______, _______, _______,
	MO(SFT_LAYR), _______, _______, SECRET10, SECRET11, SECRET12, SECRET13, _______, _______, DM_PLY1, DM_PLY2, _______, MO(SFT_LAYR), _______,
	_______, WM_SYM, MO(KCTL_LAYR), _______,          _______,           _______, MO(KCTL_LAYR), WM_SYM, _______, _______, _______, _______, _______
    ),
//  [SFT_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |BriU||BriD||MCtl||LPad| |Val-||Val+||MPrv||MPly| |MNxt||Mute||VolD||VolU|  |Calc| |Home||Docs||DLs | :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |Quit||SOC1||SOC2||SOC3||SOC4||SOC5||SOC6||SOC7||SOC8||SOC9||SOC0||    ||    ||         | |LLck||TPrv||APrv| :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |MAcel2 ||QLok||    ||    ||    ||Time||    ||P7  ||P8  ||P9  ||+ - ||CsrL||CrsR||OverVw| |FDel||TNxt||ANxt| :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||Apps||    ||    ||    ||    ||    ||P4  ||P5  ||P6  ||* / ||Num ||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |           ||MAc2||    ||    ||    ||    ||    ||P1  ||P2  ||P3  ||Stat||        RClk  |       |MSUp|       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||     ||MAcl0||                  P0                 ||PDot ||OHld ||MHld ||LClk  | |MLft||MSDn||MRgt| :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [SFT_LAYR] = LAYOUT_ansi(
	_______, KC_BRIU, KC_BRID, KC_MCTL, KC_LPAD, RGB_VAD, RGB_VAI, KC_MPRV, KC_MPLY, KC_MNXT, KC_MUTE, KC_VOLD, KC_VOLU, KC_CALC, KC_MYCM, WM_DOCS, WM_DLS,
	WM_QUIT, WM_SOC1, WM_SOC2, WM_SOC3, WM_SOC4, WM_SOC5, WM_SOC6, WM_SOC7, WM_SOC8, WM_SOC9, WM_SOC0, _______, _______, _______, LLOCK, V_TAB_PRV, SCMDGRAVE,
	MK_ACCEL2, FQLOOK, _______, _______, _______, TIMESTAMP, _______, KC_P7, KC_P8, KC_P9, DUAL_PLUSMIN, CURSORL, CURSORR, TOVERVIEW, FDELETE, V_TAB_NXT, CMDGRAVE,
	_______, FAPPS, _______, _______, _______, _______, _______, KC_P4, KC_P5, KC_P6, DUAL_MULTDIV, KC_NUM, _______, _______,
	_______, _______, MK_ACCEL2, _______, _______, _______, _______, _______, KC_P1, KC_P2, KC_P3, FSTATBAR, KC_MS_BTN2, KC_MS_UP,
	_______, _______, MK_ACCEL0, _______,            KC_P0,          _______, KC_PDOT, OPT_HOLD, MK_HOLD, KC_MS_BTN1, KC_MS_LEFT, KC_MS_DOWN, KC_MS_RIGHT
    ),
//  [KCTL_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |Hue+||Hue-||Sat+||Sat-| |RSet||    ||    ||    | |    ||    ||CTst||Debg|  |Log | |KLck||KTrk||RTog| :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |USB ||BT1 ||BT2 ||BT3 ||2.4G||    ||    ||    ||    ||    ||    ||    ||    ||         | |LLck||FJLi||Val+| :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |       ||    ||    ||    ||Rebt||    ||    ||    ||    ||    ||    ||    ||    ||      | |RgbR||HRLi||Val-| :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||    ||    ||    ||Flsh||    ||    ||    ||    ||    ||KTrk||FLit||HRowLight  |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |           ||    ||    ||EClr||    ||Boot||    ||    ||    ||    ||    ||              |       |RMo+|       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||     ||     ||          Battery Level              ||     ||     ||     ||      | |RSp-||RMo-||RSp+| :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [KCTL_LAYR] = LAYOUT_ansi(
        _______, RGB_HUI, RGB_HUD, RGB_SAI, RGB_SAD, KB_RESET, _______, _______, _______, _______, _______, COLORTEST, DB_TOGG, SECRET0, QK_LOCK, KTRACK, CSTMTOG,
        KC_USB , KC_BT1, KC_BT2, KC_BT3, KC_2G4, _______, _______, _______, _______, _______, _______, _______, _______, _______, LLOCK, FJLIGHT, RGB_VAI,
        _______, _______, _______, _______, QK_RBT, _______, _______, _______, _______, _______, _______, _______, _______, _______, ENC_RGBPUSH, HROWLIGHT, RGB_VAD,
        _______, _______, _______, _______, FLASH_KB, _______, _______, _______, _______, _______, KTRACK, FJLIGHT, _______, HROWLIGHT,
        _______, _______, _______, _______, EE_CLR, _______, BOOTLDR, _______, _______, _______, _______, _______, _______, RGB_MOD,
        _______, _______, _______, _______,          KC_BATQ,         _______, _______, _______, _______, _______, RGB_SPD, RGB_RMOD, RGB_SPI
    ),
//  [TMUX_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |LKey||LCmd||    ||    | |MOn ||MOff||VOn ||Voff| |SizL||SizR||WLef||WRgt|  |Mon | |Join||    ||    | :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |    ||PFix||PFix||PFix||PFix||PFix||PFix||PFix||PFix||PFix||PFix||PFix||PFix||         | |LLck||    ||PFix| :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |       ||PFix||PFix||    ||    ||PFix||    ||    ||    ||PFix||PFix||PFix||PFix||      | |    ||    ||    | :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||    ||PFix||PFix||    ||    ||    ||    ||    ||PFix||PFix||PFix||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |           ||PFix||PFix||PFix||    ||    ||PFix||    ||PFix||PFix||PFix||              |       |PFix|       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |LCtl ||LAlt ||     ||               PFix                  ||     ||LAlt ||     ||RCtl  | |PFix||PFix||PFix| :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [TMUX_LAYR] = LAYOUT_ansi(
        _______, TMUXLKEY, TMUXLCMD, _______, _______, TMONON, TMONOF, TVISON, TVISOF, ENC_TSIZEL, ENC_TSIZER, TWINLFT, TWINRGT, ENC_TMON, TJPANE, _______, _______,
        _______,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,_______, LLOCK,_______,LTRANS,
        _______,LTRANS,LTRANS,_______,_______,LTRANS,_______,_______,_______,LTRANS,LTRANS,LTRANS,LTRANS,_______, _______,_______,_______,
        _______,_______,LTRANS,LTRANS,_______,_______,_______,_______,_______,LTRANS,LTRANS,LTRANS, _______, _______,
        _______, _______, LTRANS,LTRANS,LTRANS,_______,_______,LTRANS,_______,LTRANS,LTRANS,LTRANS, _______,  LTRANS,
        KC_LCTL,KC_LALT,_______, _______,         LTRANS,        _______, _______,KC_LALT,_______,KC_RCTL, LTRANS,LTRANS,LTRANS
    ),
//  [VS_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |    ||Rnme||    || F4 | | F5 ||    ||    || F8 | | F9 ||F10 ||F11 ||F12 |  |Ins | |    ||    ||    | :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |    ||    ||    ||    ||    ||    ||    ||    ||    ||    ||    ||    ||    ||         | |LLck||    ||LnUp| :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |       ||    ||WrdW||ErrL||Repl||    ||    ||Uncm||Info||Outp||Publ||    ||Mtch||      | |LDel||    ||LnDn| :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||    ||LSrt||DupL||Find||Goto||    ||Join||    ||Solu||    ||    ||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |           ||    ||    ||LCom||Clip||    ||Noti||    ||    ||    ||Comm||              |       |    |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||     ||     ||                                     ||     ||     ||     ||      | |    ||    ||    | :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
  [VS_LAYR] = LAYOUT_ansi(
    _______,_______,VSRNAME,_______,KC_F4, KC_F5,_______,_______, KC_F8, KC_F9, KC_F10, KC_F11, KC_F12, VSINSLN, _______, _______, _______,
    _______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______, LLOCK,_______,VSMVLNU,
    _______,_______,VSWRDWP,VSERR,VSRNAME,_______,_______,VSLNCMU,VSINFO,VSOUTPT,VSPUB,_______,VSMATCH,_______, VSDELLN,_______,VSMVLND,
    _______,_______,VSLNSRT,VSDUPLN,VSFIND,VSGOTO,VSREPL,VSLJOIN,_______,VSSOLU,_______,_______, _______, _______,
    _______, _______, _______, _______, VSLNCMC,VSCLIPB,_______,VSNOTIF,_______,_______,_______,VSLBCMT, _______,  _______,
    _______,_______,_______, _______,      _______,     _______, _______,_______,_______,_______, _______,_______,_______
    ),
//  [MSYM_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |SUP1||SUP2||SUP3||    | |SUTH||SUTD||SUTC||SUTS| |CRCI||    ||    ||NBSP|  |Uni | |    ||    ||    | :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||         | |LLck||    ||    | :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |       ||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN  | |    ||    ||    | :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |LShift     ||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||RShift        |       |    |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||     ||     ||                                     ||     ||     ||     ||      | |    ||    ||    | :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [MSYM_LAYR] = LAYOUT_ansi(
        _______, SUP1, SUP2, SUP3, _______, SUITH, SUITD, SUITC, SUITS,  CIRCLI, _______, _______, NBSP, ENC_UNIMENU, _______,_______,_______,
        LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,_______, LLOCK,_______,_______,
        _______,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS, _______,_______,_______,
        _______,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS, _______, _______,
        KC_LSFT, _______, LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS, KC_RSFT,     _______,
        _______,_______,_______, _______,       _______,      _______,  _______,_______,_______,_______, _______,_______,_______
    ),
//  [WSYM_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |SUP1||SUP2||SUP3||    | |SUTH||SUTD||SUTC||SUTS| |CRCI||    ||    ||NBSP|  |Uni | |    ||    ||    | :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |TDG ||TD1 ||OPT2||OPT3||OPT4||OPT5||OPT6||OPT7||OPT8||OPT9||OPT0||OMIN||OPEQ||         | |LLck||    ||    | :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |       ||OPRQ||OPTW||TDE ||OPTR||OPTT||OPTY||TDU ||TDI ||OPTO||OPTP||OPLB||OPRB||OPTBSL| |    ||    ||    | :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||OPTA||OPTS||OPTD||OPTF||OPTG||OPTH||OPTJ||OPTK||OPTL||OPSM||OPAP||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |           ||OPTZ||OPTX||OPTC||OPTV||OPTB||TDN ||OPTM||OPCM||OPDT||OPSL||              |       |    |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||     ||     ||                                     ||     ||     ||     ||      | |    ||    ||    | :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [WSYM_LAYR] = LAYOUT_ansi(
        _______, SUP1, SUP2, SUP3, _______, SUITH, SUITD, SUITC, SUITS,  CIRCLI, _______, _______, NBSP, ENC_UNIMENU, _______,_______,_______,
        TD(ACT_GRV), TD(ACT_1), OPT2, OPT3, OPT4, OPT5, OPT6, OPT7, OPT8, OPT9, OPT0, OPTMIN, OPTEQ, _______, LLOCK,_______,_______,
        _______, OPTQ, OPTW, TD(ACT_E), OPTR, OPTT, OPTY, TD(ACT_U), TD(ACT_I), OPTO, OPTP, OPTLBR, OPTRBR, OPTBSL, _______,_______,_______,
        _______, OPTA, OPTS, OPTD, OPTF, OPTG, OPTH, OPTJ, OPTK, OPTL, OPTSEM, OPTAPO,_______, _______,
        _______, _______, OPTZ, OPTX, OPTC, OPTV, OPTB, TD(ACT_N), OPTM, OPTCOM, OPTDOT, OPTSLS, _______,    _______,
        _______,_______,_______, _______,      _______,     _______, _______,_______,_______,_______, _______,_______,_______
    ),
//  [WIDE_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |    ||    ||    ||    | |    ||    ||    ||    | |    ||    ||    ||    |  |    | |    ||    ||    | :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||         | |LLck||BBTx||SThr| :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |       ||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN  | |    ||BTxt||ULin| :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |           ||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||LTRN||              |       |    |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||     ||     ||              LTRANS                 ||     ||     ||     ||      | |    ||    ||    | :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [WIDE_LAYR] = LAYOUT_ansi(
        _______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______, _______, _______,_______,_______,
        LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,_______, LLOCK,BBRTEXT,STHRU,
        _______,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS, _______,BARTEXT,UNDERLN,
        _______,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,_______, _______,
        _______, _______, LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS,LTRANS, _______,     _______,
        _______,_______,_______, _______,       LTRANS,     _______,  _______,_______,_______,_______, _______,_______,_______
    ),
//  [CIRC_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |    ||    ||    ||    | |    ||    ||    ||    | |    ||    ||    ||    |  |    | |    ||    ||    | :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |    ||CIR1||CIR2||CIR3||CIR4||CIR5||CIR6||CIR7||CIR8||CIR9||CIR0||    ||    ||         | |LLck||    ||    | :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |       ||CIRQ||CIRW||CIRE||CIRR||CIRT||CIRY||CIRU||CIRI||CIRO||CIRP||    ||    ||      | |    ||    ||    | :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||CIRA||CIRS||CIRD||CIRF||CIRG||CIRH||CIRJ||CIRK||CIRL||    ||    ||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |           ||CIRZ||CIRX||CIRC||CIRV||CIRB||CIRN||CIRM||    ||    ||    ||              |       |    |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||     ||     ||                                     ||     ||     ||     ||      | |    ||    ||    | :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [CIRC_LAYR] = LAYOUT_ansi(
        _______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______,_______, _______, _______,_______,_______,
        _______,CIRCL1,CIRCL2,CIRCL3,CIRCL4,CIRCL5,CIRCL6,CIRCL7,CIRCL8,CIRCL9,CIRCL0,_______,_______,_______, LLOCK,_______,_______,
        _______,CIRCLQ,CIRCLW,CIRCLE,CIRCLR,CIRCLT,CIRCLY,CIRCLU,CIRCLI,CIRCLO,CIRCLP,_______,_______,_______, _______,_______,_______,
        _______,CIRCLA,CIRCLS,CIRCLD,CIRCLF,CIRCLG,CIRCLH,CIRCLJ,CIRCLK,CIRCLL,_______,_______, _______, _______,
        _______, _______, CIRCLZ,CIRCLX,CIRCLC,CIRCLV,CIRCLB,CIRCLN,CIRCLM,_______,_______,_______, _______,   _______,
        _______,_______,_______, _______,      _______,     _______, _______,_______,_______,_______, _______,_______,_______
    ),
//  [EMO_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: |    | |Esmi||Eirk||EAst||ESad| |Car ||Bus ||Trai||Taxi| |Snai||Ninj||Stop||Hand|  |Uni | |EScr||EMic||EBul| :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: |    || E1 || E2 || E3 || E4 || E5 || E6 || E7 || E8 || E9 || E0 || E- || E+ ||         | |LLck||EDri||EMrk| :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |       ||Piza||Burg||Chik||Taco||    ||    ||    || EI ||EOK ||Pack||US  ||PI  ||      | |EDel||ECMk||EQMk| :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |        ||Star||SunG||    ||    ||Glbe||Hash||    ||Keyb||    ||    ||    ||           |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |           ||    ||    ||    ||    ||Botl||    ||    ||Shh ||Grim||Div ||              |       |EUp |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: |     ||     ||     ||                                     ||     ||     ||     ||      | |ELft||EDwn||ERgt| :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [EMO_LAYR] = LAYOUT_ansi(
        _______, E_SMILE, E_SMIRK, E_ASTON, E_SAD, E_CAR, E_BUS, E_TRAIN, E_TAXI, E_SNAIL, E_NINJA, E_STOP, E_HAND, ENC_UNIMENU, E_SSHOT, E_MIC, E_BULB,
        _______,E_K1,E_K2,E_K3,E_K4,E_K5,E_K6,E_K7,E_K8,E_K9,E_K0,E_MINS,E_PLUS,_______,LLOCK,E_DRINK,E_EMARK,
        _______, E_PIZZA, E_BURGER, E_CHICKEN, E_TACO, _______, _______, _______, E_I, E_OK, E_PACKAGE, E_FLAGUS, E_FLAGPI, _______, E_TRASH, E_CMARK, E_QMARK,
        _______,E_STAR,E_SGLASS,_______,_______,E_GLOBE,E_HASH,_______,E_KB,_______,_______,_______,_______,_______,
        _______, _______, _______,_______,_______,_______, E_BOTTLE, _______, _______, E_SHH, E_GRIM, E_DIV, _______, E_POINTU,
        _______,_______,_______, _______,       _______,      _______, _______,_______,_______,_______,E_POINTL,E_POINTD,E_POINTR
    ),
//  [LOCK_LAYR]
//,--------------------------------------------------------------------------------------------------------------,
//:  ____   ______________________   ______________________   ______________________    ____   ________________  :
//: | No | | No || No || No || No | | No || No || No || No | | No || No || No || No |  |ULck| | No || No || No | :
//: |____| |____||____||____||____| |____||____||____||____| |____||____||____||____|  |____| |____||____||____| :
//:  _______________________________________________________________________________________   ________________  :
//: | No || No || No || No || No || No || No || No || No || No || No || No || No ||   No    | | No || No || No | :
//: |____||____||____||____||____||____||____||____||____||____||____||____||____||_________| |____||____||____| :
//: |  No   || No || No || No || No || No || No || No || No || No || No || No || No ||  No  | | No || No || No | :
//: |_______||____||____||____||____||____||____||____||____||____||____||____||____||______| |____||____||____| :
//: |   No   || No || No || No || No || No || No || No || No || No || No || No ||    No     |                    :
//: |________||____||____||____||____||____||____||____||____||____||____||____||___________|        ____        :
//: |    No     || No || No || No || No || No || No || No || No || No || No ||      No      |       | No |       :
//: |___________||____||____||____||____||____||____||____||____||____||____||______________|  ____ |____| ____  :
//: | No  || No  || No  ||                 No                  || No  || No  || No  ||  No  | | No || No || No | :
//: |_____||_____||_____||_____________________________________||_____||_____||_____||______| |____||____||____| :
//`--------------------------------------------------------------------------------------------------------------`
    [LOCK_LAYR] = LAYOUT_ansi(
        KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,TD(KB_UNLOCK),KC_NO,KC_NO,KC_NO,
        KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,  KC_NO,KC_NO,KC_NO,
        KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,  KC_NO,KC_NO,KC_NO,
        KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,
        KC_NO,KC_NO,  KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,KC_NO,    KC_NO,        KC_NO,
        KC_NO,KC_NO,KC_NO, KC_NO,           KC_NO,           KC_NO, KC_NO,KC_NO,KC_NO,KC_NO,  KC_NO,KC_NO,KC_NO
    )
};
// clang-format on

bool process_record_user(uint16_t keycode, keyrecord_t *record) {
    // userspace
    if (!process_record_userspace(keycode,record)) {
        return false;
    }

    return process_record_secrets(keycode, record);
}

void leader_end_user(void) {
    // if userspace or secrets return false, leader matching stops there
    if (process_leader_userspace() && process_leader_secrets()) {
        // if leader sequence failed, set var from rgb_matrix to blink the rgb red a few times
        is_leader_error = true;
        leader_error_token = defer_exec(1500, leader_error_callback, NULL);  // schedule callback to stop blinking
    }

    is_in_leader_sequence = false;
}
